<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>瀑布流</title>
<style type="text/css">
	*{
		margin: 0;
		padding: 0;
	}
	li{
		list-style: none;
	}
	#div1{
		width: 785px;
		height: auto;
		margin: 20px auto;
	}
	ul{
		width: 225px;
		margin: 5px;
		float: left;
	}
</style>
<script type="text/javascript" src="new_ajax.js"></script>
<script type="text/javascript">
	window.onload = funtion(){

		var aUl = document.getElementsByTagName('ul');
		window.onscroll = function(){
			var viewHeight = document.documentElement.clientHeight;
			var scrollY = document.documentElement.scollTop||document.body.scrollTop;

			for (var i = 0; i < aUl.length; i++) {
				var aLi = =aUl[i].getElementsByTagName('li');

				var lastLi = aLi[aLi.length-1];

				if (posTop(lastLi)<viewHeight+scrollTop) {
					ajax('data.js',function(str){

					});
				}
			}
		}
		function posTop(obj){
			var top = 0;

			while(obj){
				top += obj.offsetTop;
				obj = obj.offsetParent;
			}
			return top;			
		}
	}
</script>
</head>
<body>
	<div id="div1">
		<ul>
			<li><img src="img/1.jpg" alt=""></li>
			<p>11111111</p>
		</ul>
		<ul>
			<li><img src="img/2.jpg" alt=""></li>
			<p>11111111</p>
		</ul>
		<ul>
			<li><img src="img/7.jpg" alt=""></li>
			<p>11111111</p>
		</ul>
		<ul>
			<li><img src="img/9.jpg" alt=""></li>
			<p>11111111</p>
		</ul>
		<ul>
			<li><img src="img/5.jpg" alt=""></li>
			<p>11111111</p>
		</ul>
		<ul>
			<li><img src="img/6.jpg" alt=""></li>
			<p>11111111</p>
		</ul>
		<ul>
			<li><img src="img/7.jpg" alt=""></li>
			<p>11111111</p>
		</ul>
		<ul>
			<li><img src="img/9.jpg" alt=""></li>
			<p>11111111</p>
		</ul>

	</div>
	<img src="img/1.jpg" alt="">

</body>
</html>